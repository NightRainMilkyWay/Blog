import{g as m,i as _,l as p,n as M,_ as f,L as v,r as P,o as b,M as h,N as A,a as s,P as g,Q as x,d as E}from"./app-66271dca.js";import w from"./MyIcon-52c3dcb9.js";import{a as G}from"./axios-a342f982.js";import{_ as C}from"./plugin-vue_export-helper-c27b6911.js";const N={class:"MyMusic"},I=s("div",{id:"GlobalAPlayer"},null,-1),S=m({__name:"NavMusic",setup(k){let l,o=_(!1),i=[];const y=()=>{o.value=!o.value},r=()=>{o.value&&(o.value=!1)},u=()=>{const t=document.querySelector(".vp-navbar-end");if(!t)return;if(!document.querySelector("#MyMusic_Menu")){const a=document.createElement("div");a.id="MyMusic_Menu",a.classList.add("nav-item"),a.innerHTML='<div id="MyMusic_icon" class="btnImg"></div>',t.appendChild(a)}const e=document.querySelector("#MyMusic_Menu");e.onclick=a=>{y(),a.stopPropagation()};const n=document.querySelector(".MyMusic");n.onclick=a=>{a.stopPropagation()}},d=()=>{if(!l)return;const t=window,e=document.getElementById("GlobalAPlayer");!e||i.length<1||(c(),e.classList.contains("aplayer"))||(t.GlobalAPlayer=new l({container:document.getElementById("GlobalAPlayer"),audio:i,lrcType:3,listFolded:!1,listMaxHeight:"324px",mini:!1,fixed:!1,volume:1,storageName:"GlobalAPlayer"}),t.GlobalAPlayer.on("play",function(){c()}),t.GlobalAPlayer.on("pause",function(){c()}))};function c(){var e,n;const t=window;t.GlobalAPlayer&&t.GlobalAPlayer.mode&&(t.GlobalAPlayer.paused?(e=document.getElementById("MyMusic_icon"))==null||e.setAttribute("spin","false"):(n=document.getElementById("MyMusic_icon"))==null||n.setAttribute("spin","true"))}return p(()=>{const t=M();G({method:"get",url:"//NightRainMilkyWay.cn/musiclist.json",params:{}}).then(e=>{var n=e.data;n&&n.length>0&&(i=n)}),f(()=>import("./APlayer.min-ab4daecc.js").then(e=>e.A),["assets/APlayer.min-ab4daecc.js","assets/commonjsHelpers-725317a4.js"]).then(e=>{v(()=>{l=e.default,u(),d(),window.document.body.onclick=()=>{r()}}),t.beforeEach(()=>{setTimeout(()=>{u(),d()},50)})})}),(t,e)=>{const n=P("ClientOnly");return b(),h(n,null,{default:A(()=>[s("div",N,[s("div",{class:g(["MyMusic_Play",{hide:!x(o)}])},[s("div",{class:"close",onClick:r},[E(w,{name:"guanbi"})]),I],2)])]),_:1})}}});const W=C(S,[["__file","NavMusic.vue"]]);export{W as default};
